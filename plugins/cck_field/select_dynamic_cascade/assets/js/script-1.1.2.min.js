/**
* @package			SEBLOD (App Builder & CCK) // SEBLOD nano (Form Builder)
* @editor			Octopoos - www.octopoos.com
* @copyright		Copyright (C) 2013 SEBLOD. All Rights Reserved.
**/

(function(e){function t(t,n,r){if(r==2||r==1){var i=n.split(",")}if(r==2){e.each(i,function(e,n){t.find("input:radio[value="+n+"]").attr("checked","1")})}else if(r==1){e.each(i,function(e,n){t.find("input:checkbox[value="+n+"]").attr("checked","1")})}else{t.val(n)}}function n(n,r,i,s,o,u,a,f,l,c){var h=c+"index.php?option=com_cck&format=raw&task=ajax&file=plugins/cck_field/select_dynamic_cascade/tmpl/form.php";if(!f){f=""}if(!l){l=0}var u=u?u:0;if(n.val()!=""){if(o=="get"){a.join(",");e.ajax({type:"GET",url:h+"&item="+s+"&where="+n.val()+"&prev="+a,context:document.body,success:function(e){r.html(e);if(u==1){var n=e.indexOf("option")>0?e.match(/\/option/gi).length:0;if(n>0){r.attr("selectedIndex",0);r.change()}}else{t(r,f,l);r.change()}}})}else{e.ajax({url:h+"&type=post",global:false,type:"POST",data:{item:s,where:n.val(),prev:a},dataType:"html",async:false,success:function(e){r.html(e);if(u==1){var n=e.indexOf("option")>0?e.match(/\/option/gi).length:0;if(n>0){r.attr("selectedIndex",0);r.change()}}else{t(r,f,l);r.change()}}})}}}JCck.Sdc={load:function(t,r,i,s,o,u,a){var f=t.length;var l=e(o);l.each(function(r,l){$this=e(this);var r=e(o).index($this);var c=e(o).slice(r+1,r+2);var h=r%f;var p=i;var d=i[h+1];var v=s[h+1];var m=s[h];var g=m==2?e(this).find("input:radio:checked"):$this;var y=t[h+1];if(h+1!=f){if(g.val()!=""&&c.val()==""){n(g,c,h,y,u,0,p,d,v,a)}}});l.live("change",function(i,l){$this=e(this);var i=e(o).index($this);var c=e(o).slice(i+1,i+2);var h=i%f;var p=e(o).slice(i-h,i+1);var d=new Array;var v=t[h+1];var m=s[h];var g=m==2?e(this).find("input:radio:checked"):$this;p.each(function(t,n){$p=e(this);$rad=m==2?e(this).find("input:radio:checked"):$p;if($rad.length>0){d.push($rad.val())}else{d.push($p.val())}});if(h+1!=f){if(g.val()!=""){n(g,c,h,v,u,1,d,0,0,a)}else{if(r[h+1]){c.html('<option selected="selected" value="">'+r[h+1]+"</option>")}else{c.html("")}c.change()}}})}}})(jQuery)